{% comment %}
  Colecci√≥n Destacada Premium - ToyPride
  VERSI√ìN DEFINITIVA - Usa card-product del tema
  
  Compatible 100% con Spotlight
{% endcomment %}

{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

<style>
  .featured-collection-premium-{{ section.id }} {
    padding: {{ section.settings.padding_top_mobile }}px 0 {{ section.settings.padding_bottom_mobile }}px;
    position: relative;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .featured-collection-premium-{{ section.id }} {
      padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    }
  }

  /* Container */
  .featured-collection-premium-{{ section.id }} .container {
    max-width: var(--page-width);
    margin: 0 auto;
    padding: 0 20px;
  }

  /* Header Section */
  .featured-collection-premium-{{ section.id }} .section-header {
    text-align: {{ section.settings.heading_alignment }};
    margin-bottom: 40px;
    position: relative;
  }

  @media (min-width: 768px) {
    .featured-collection-premium-{{ section.id }} .section-header {
      margin-bottom: 60px;
    }
  }

  /* T√≠tulo con estilo c√≥mic */
  .featured-collection-premium-{{ section.id }} .section-title {
    font-size: 32px;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 2px;
    margin: 0 0 10px 0;
    color: {{ section.settings.heading_color }};
    text-shadow: 
      3px 3px 0px rgba(0, 0, 0, 0.2),
      -1px -1px 0px rgba(255, 255, 255, 0.5);
    position: relative;
    display: inline-block;
    padding: 15px 30px;
    background: {{ section.settings.heading_bg_color }};
    border: 4px solid {{ section.settings.heading_border_color }};
    border-radius: 15px;
    box-shadow: 
      0 6px 0 {{ section.settings.heading_border_color }},
      0 8px 20px rgba(0, 0, 0, 0.2);
    transform: rotate(-1deg);
    animation: titleFloat 3s ease-in-out infinite;
  }

  @keyframes titleFloat {
    0%, 100% {
      transform: rotate(-1deg) translateY(0);
    }
    50% {
      transform: rotate(1deg) translateY(-5px);
    }
  }

  @media (min-width: 768px) {
    .featured-collection-premium-{{ section.id }} .section-title {
      font-size: 48px;
      padding: 20px 50px;
      border-width: 5px;
    }
  }

  /* Descripci√≥n */
  .featured-collection-premium-{{ section.id }} .section-description {
    font-size: 16px;
    line-height: 1.6;
    color: {{ section.settings.description_color }};
    max-width: 800px;
    margin: 20px auto 0;
    font-weight: 500;
  }

  @media (min-width: 768px) {
    .featured-collection-premium-{{ section.id }} .section-description {
      font-size: 18px;
    }
  }

  /* Product Grid */
  .featured-collection-premium-{{ section.id }} .product-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 40px;
  }

  @media (min-width: 768px) {
    .featured-collection-premium-{{ section.id }} .product-grid {
      grid-template-columns: repeat({{ section.settings.products_per_row_desktop }}, 1fr);
      gap: 30px;
    }
  }

  /* Wrapper para cada card */
  .featured-collection-premium-{{ section.id }} .product-card-wrapper {
    position: relative;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .featured-collection-premium-{{ section.id }} .product-card-wrapper:hover {
    transform: translateY(-10px) scale(1.02);
  }

  /* Estilos para el card del tema */
  .featured-collection-premium-{{ section.id }} .card-wrapper {
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.4s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .featured-collection-premium-{{ section.id }} .card-wrapper:hover {
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
    border: 3px solid {{ section.settings.card_hover_border }};
  }

  /* Badge premium sobre el card */
  .featured-collection-premium-{{ section.id }} .premium-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 10;
    background: {{ section.settings.badge_bg_color }};
    color: {{ section.settings.badge_text_color }};
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: 900;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border: 3px solid {{ section.settings.badge_border_color }};
    box-shadow: 
      0 4px 0 {{ section.settings.badge_border_color }},
      0 6px 15px rgba(0, 0, 0, 0.3);
    transform: rotate(-5deg);
    animation: badgePulse 2s ease-in-out infinite;
  }

  @keyframes badgePulse {
    0%, 100% {
      transform: rotate(-5deg) scale(1);
    }
    50% {
      transform: rotate(-5deg) scale(1.05);
    }
  }

  /* Badge de agotado */
  .featured-collection-premium-{{ section.id }} .premium-badge.sold-out {
    background: #666 !important;
    border-color: #333 !important;
    box-shadow: 
      0 4px 0 #333 !important,
      0 6px 15px rgba(0, 0, 0, 0.3) !important;
  }

  /* Bot√≥n "Ver todo" */
  .featured-collection-premium-{{ section.id }} .view-all-wrapper {
    text-align: center;
    margin-top: 40px;
  }

  .featured-collection-premium-{{ section.id }} .view-all-button {
    display: inline-block;
    padding: 18px 50px;
    background: {{ section.settings.view_all_bg }};
    color: {{ section.settings.view_all_text_color }};
    border: 4px solid {{ section.settings.view_all_border }};
    border-radius: 12px;
    font-weight: 900;
    font-size: 18px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 
      0 6px 0 {{ section.settings.view_all_border }},
      0 8px 25px rgba(0, 0, 0, 0.25);
    position: relative;
    overflow: hidden;
  }

  .featured-collection-premium-{{ section.id }} .view-all-button::after {
    content: '‚Üí';
    margin-left: 10px;
    display: inline-block;
    transition: transform 0.3s ease;
  }

  .featured-collection-premium-{{ section.id }} .view-all-button:hover::after {
    transform: translateX(5px);
  }

  .featured-collection-premium-{{ section.id }} .view-all-button:hover {
    transform: translateY(-4px);
    box-shadow: 
      0 8px 0 {{ section.settings.view_all_border }},
      0 10px 30px rgba(0, 0, 0, 0.35);
  }

  /* Animaci√≥n de entrada */
  .featured-collection-premium-{{ section.id }} .product-card-wrapper {
    animation: fadeInUp 0.6s ease-out backwards;
  }

  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(1) { animation-delay: 0.1s; }
  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(2) { animation-delay: 0.2s; }
  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(3) { animation-delay: 0.3s; }
  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(4) { animation-delay: 0.4s; }
  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(5) { animation-delay: 0.5s; }
  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(6) { animation-delay: 0.6s; }
  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(7) { animation-delay: 0.7s; }
  .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(8) { animation-delay: 0.8s; }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Ajustes responsive */
  @media (max-width: 767px) {
    .featured-collection-premium-{{ section.id }} .product-card-wrapper:nth-child(n+5) {
      animation-delay: 0.3s;
    }
  }
</style>

<div class="featured-collection-premium-{{ section.id }}">
  <div class="container">
    {%- if section.settings.heading != blank or section.settings.description != blank -%}
      <div class="section-header">
        {%- if section.settings.heading != blank -%}
          <h2 class="section-title">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.description != blank -%}
          <div class="section-description">{{ section.settings.description }}</div>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- liquid
      assign collection = collections[section.settings.collection]
      assign products_to_show = section.settings.products_to_show
    -%}

    {%- if collection != blank and collection.products_count > 0 -%}
      <div class="product-grid">
        {% assign skip_card_product_styles = false %}
        {%- for product in collection.products limit: products_to_show -%}
          {% assign lazy_load = false %}
          {%- if forloop.index > 2 -%}
            {% assign lazy_load = true %}
          {%- endif -%}
          
          <div class="product-card-wrapper">
            {%- comment -%} Badge Premium {%- endcomment -%}
            {%- if product.compare_at_price > product.price -%}
              <div class="premium-badge">
                {%- assign discount = product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price -%}
                üî• -{{ discount }}%
              </div>
            {%- elsif product.available == false -%}
              <div class="premium-badge sold-out">
                AGOTADO
              </div>
            {%- elsif section.settings.show_new_badge and forloop.index <= 2 -%}
              <div class="premium-badge">
                ‚ö° NUEVO
              </div>
            {%- endif -%}

            {%- comment -%} Card del Tema {%- endcomment -%}
            {% render 'card-product',
              card_product: product,
              media_aspect_ratio: section.settings.image_ratio,
              image_shape: section.settings.image_shape,
              show_secondary_image: section.settings.show_secondary_image,
              show_vendor: section.settings.show_vendor,
              show_rating: false,
              lazy_load: lazy_load,
              skip_styles: skip_card_product_styles,
              section_id: section.id
            %}
            {%- assign skip_card_product_styles = true -%}
          </div>
        {%- endfor -%}
      </div>

      {%- if section.settings.show_view_all and collection.products_count > products_to_show -%}
        <div class="view-all-wrapper">
          <a href="{{ collection.url }}" class="view-all-button">
            {{ section.settings.view_all_text }}
          </a>
        </div>
      {%- endif -%}
    {%- else -%}
      <div style="text-align: center; padding: 60px 20px;">
        <p style="font-size: 18px; color: #999;">
          Selecciona una colecci√≥n con productos para mostrar aqu√≠
        </p>
      </div>
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "üî• Colecci√≥n Premium",
  "tag": "section",
  "class": "section-featured-collection-premium",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Colecci√≥n"
    },
    {
      "type": "header",
      "content": "üìù Contenido"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "T√≠tulo de la secci√≥n",
      "default": "üî• NOVEDADES"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Descripci√≥n",
      "default": "Descubre los nuevos ingresos a la tienda: modelos reci√©n llegados, series nuevas y lanzamientos limitados. ¬°No te los pierdas!"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Alineaci√≥n del t√≠tulo",
      "options": [
        {
          "value": "left",
          "label": "Izquierda"
        },
        {
          "value": "center",
          "label": "Centro"
        },
        {
          "value": "right",
          "label": "Derecha"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "üé® Colores del Header"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Color del t√≠tulo",
      "default": "#000000"
    },
    {
      "type": "color_background",
      "id": "heading_bg_color",
      "label": "Fondo del t√≠tulo",
      "default": "linear-gradient(135deg, #FFD700 0%, #FF0000 100%)"
    },
    {
      "type": "color",
      "id": "heading_border_color",
      "label": "Borde del t√≠tulo",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Color de descripci√≥n",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "üéØ Productos"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Productos a mostrar",
      "default": 4
    },
    {
      "type": "range",
      "id": "products_per_row_desktop",
      "min": 2,
      "max": 6,
      "step": 1,
      "label": "Productos por fila (desktop)",
      "default": 4
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "Adapt to image"
        },
        {
          "value": "portrait",
          "label": "Portrait"
        },
        {
          "value": "square",
          "label": "Square"
        }
      ],
      "default": "adapt",
      "label": "Image ratio"
    },
    {
      "type": "select",
      "id": "image_shape",
      "options": [
        {
          "value": "default",
          "label": "Default"
        },
        {
          "value": "arch",
          "label": "Arch"
        },
        {
          "value": "blob",
          "label": "Blob"
        },
        {
          "value": "chevronleft",
          "label": "Chevron left"
        },
        {
          "value": "chevronright",
          "label": "Chevron right"
        },
        {
          "value": "diamond",
          "label": "Diamond"
        },
        {
          "value": "parallelogram",
          "label": "Parallelogram"
        },
        {
          "value": "round",
          "label": "Round"
        }
      ],
      "default": "default",
      "label": "Image shape"
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "default": false,
      "label": "Show second image on hover"
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Mostrar marca del producto",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_new_badge",
      "label": "Mostrar badge 'NUEVO' en primeros 2",
      "default": true
    },
    {
      "type": "header",
      "content": "üé® Colores de Cards"
    },
    {
      "type": "color",
      "id": "card_hover_border",
      "label": "Borde hover de card",
      "default": "#FFD700"
    },
    {
      "type": "header",
      "content": "üè∑Ô∏è Badges"
    },
    {
      "type": "color",
      "id": "badge_bg_color",
      "label": "Fondo de badge",
      "default": "#FF0000"
    },
    {
      "type": "color",
      "id": "badge_text_color",
      "label": "Texto de badge",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "badge_border_color",
      "label": "Borde de badge",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "üëÅÔ∏è Bot√≥n 'Ver todo'"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Mostrar bot√≥n 'Ver todo'",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "Texto del bot√≥n",
      "default": "Ver todo"
    },
    {
      "type": "color",
      "id": "view_all_bg",
      "label": "Fondo del bot√≥n",
      "default": "#FFD700"
    },
    {
      "type": "color",
      "id": "view_all_text_color",
      "label": "Color del texto",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "view_all_border",
      "label": "Borde del bot√≥n",
      "default": "#FF0000"
    },
    {
      "type": "header",
      "content": "üìè Espaciado"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding superior (desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Padding inferior (desktop)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Padding superior (m√≥vil)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Padding inferior (m√≥vil)",
      "default": 40
    }
  ],
  "presets": [
    {
      "name": "üî• Colecci√≥n Premium"
    }
  ]
}
{% endschema %}
